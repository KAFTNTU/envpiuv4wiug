# üöó RoboCar Android App

–ü–æ–≤–Ω–∏–π Android APK –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ–±–æ—Ç–æ–º —á–µ—Ä–µ–∑ **Bluetooth BLE**.

## –Ø–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –≤ Android Studio

1. –†–æ–∑–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö—ñ–≤
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Android Studio** ‚Üí **Open** ‚Üí –≤–∏–±–µ—Ä—ñ—Ç—å –ø–∞–ø–∫—É `RoboCarApp`
3. –ó–∞—á–µ–∫–∞–π—Ç–µ –ø–æ–∫–∏ Gradle —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î—Ç—å—Å—è
4. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å Android –ø—Ä–∏—Å—Ç—Ä—ñ–π (–∞–±–æ –µ–º—É–ª—è—Ç–æ—Ä –∑ BLE –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é)
5. **Run** ‚Üí app

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
app/
‚îú‚îÄ‚îÄ ble/
‚îÇ   ‚îî‚îÄ‚îÄ BleManager.kt         ‚Üê –ù–∞—Ç–∏–≤–Ω–∏–π BLE + SLIP encode/decode
‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îî‚îÄ‚îÄ Models.kt             ‚Üê TuningSettings, MoveRecord
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ theme/                ‚Üê –ö–æ–ª—å–æ—Ä–∏, —Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ joystick/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ JoystickControl.kt ‚Üê Canvas joystick –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ JoystickScreen.kt  ‚Üê –ï–∫—Ä–∞–Ω –∑ –¥–∂–æ–π—Å—Ç–∏–∫–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ blockly/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BlocklyScreen.kt   ‚Üê WebView –∑ Blockly + AndroidBridge
‚îÇ   ‚îî‚îÄ‚îÄ settings/
‚îÇ       ‚îî‚îÄ‚îÄ TuningDialog.kt    ‚Üê –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ—Ç–æ—Ä—ñ–≤
‚îú‚îÄ‚îÄ AppScreen.kt              ‚Üê –ì–æ–ª–æ–≤–Ω–∏–π UI (TopBar + TabNav)
‚îú‚îÄ‚îÄ MainViewModel.kt          ‚Üê –í—Å—è –ª–æ–≥—ñ–∫–∞ —Å—Ç–∞–Ω—É
‚îî‚îÄ‚îÄ MainActivity.kt           ‚Üê –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É, –ø—Ä–∞–≤–∞

assets/web/                   ‚Üê Blockly HTML (–æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π + –ø–∞—Ç—á –¥–ª—è Android)
```

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

| –§—É–Ω–∫—Ü—ñ—è | –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è |
|---------|-----------|
| BLE –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (HM-10, NUS) | –ù–∞—Ç–∏–≤–Ω–∏–π Kotlin BleManager |
| SLIP –∫–æ–¥—É–≤–∞–Ω–Ω—è –ø–∞–∫–µ—Ç—ñ–≤ | Kotlin, —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—É |
| –î–∂–æ–π—Å—Ç–∏–∫ (Tank drive) | Compose Canvas |
| –ì—ñ—Ä–æ—Å–∫–æ–ø –∫–µ—Ä—É–≤–∞–Ω–Ω—è | TYPE_ORIENTATION —Å–µ–Ω—Å–æ—Ä |
| Blockly/Scratch —Ä–µ–¥–∞–∫—Ç–æ—Ä | WebView + AndroidBridge |
| –ü—Ä–∏–π–æ–º —Å–µ–Ω—Å–æ—Ä—ñ–≤ P1..P4 | BleManager ‚Üí ViewModel ‚Üí WebView |
| –ó–∞–ø–∏—Å/–≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—Ä–µ–∫—É | ViewModel (moveHistory) |
| –Ü–Ω–≤–µ—Ä—Å—ñ—è/–ë–∞–ª–∞–Ω—Å/–ß—É—Ç–ª–∏–≤—ñ—Å—Ç—å | TuningSettings + DataStore |
| –ü–∞—Ä–æ–ª—å –∫–æ–º–∞–Ω–¥–∞ | sendText("PASS:xxx") |
| –õ–æ–≥ BLE | LogModal |

## –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ BLE –º–æ–¥—É–ª—ñ

- **HM-10 / HC-08** ‚Äî UUID —Å–µ—Ä–≤—ñ—Å 0xFFE0, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ 0xFFE1
- **NUS Nordic** ‚Äî UUID 6e400001... (UART service)

## –ü—Ä–æ—Ç–æ–∫–æ–ª –ø–∞–∫–µ—Ç—ñ–≤

–ü–∞–∫–µ—Ç–∏ –∫–æ–¥—É—é—Ç—å—Å—è SLIP (RFC 1055):
- **–ú–∞—à–∏–Ω–∫–∞**: 2 –±–∞–π—Ç–∏ `[L, R]` signed -100..100
- **4 –º–æ—Ç–æ—Ä–∏**: 4 –±–∞–π—Ç–∏ `[M1, M2, M3, M4]`
- **–°–µ–Ω—Å–æ—Ä–∏** (–≤—ñ–¥ —Ä–æ–±–æ—Ç–∞): 4 –±–∞–π—Ç–∏ `[P1, P2, P3, P4]`

## –ü–æ—Ç—Ä—ñ–±–Ω—ñ –¥–æ–∑–≤–æ–ª–∏ (Android)

- `BLUETOOTH_SCAN` + `BLUETOOTH_CONNECT` (Android 12+)
- `ACCESS_FINE_LOCATION` (Android 11 —ñ –Ω–∏–∂—á–µ)
